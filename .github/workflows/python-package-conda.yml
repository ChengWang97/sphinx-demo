name: Deploy Documentation

on:
  push:
    branches: [ main ]  # 触发分支

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest  # GitHub 提供的虚拟机环境

    steps:
    # 步骤1: 检出代码
    - name: Checkout repository
      uses: actions/checkout@v4

    # 步骤2: 设置 Python 环境
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.x'  # 使用最新Python3

    # 步骤3: 安装依赖
    - name   名字: Install dependencies
      run: |
        pip install sphinx sphinx-rtd-theme

    # 步骤4: 构建文档
    - name   名字: Build HTML
      run   运行: |
        sphinx-build -b html docs/ public/  # 源目录→输出目录

    # 步骤5: 部署到 GitHub Pages
    - name   名字: Deploy to GitHub Pages
      uses   使用: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./public  # 部署目录
